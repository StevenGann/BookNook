# Village – I2C Protocol (Pico W ↔ RP2350-Zero)

## Overview

- **Bus**: Single I2C; Pico W is master, each RP2350-Zero is a slave with a **unique address** from the Pico W config list.
- **Direction**: Master writes only.
- **Purpose**: Pico W sends scene ID (0–254, up to 255 scenes) and optional brightness so each LCD plays the selected bitmap animation.

## Register map (slave view)

| Register | Size | Meaning |
|----------|------|---------|
| 0x00 | 1 byte | Scene ID (0–254). Animation switches immediately and loops at 24 fps until another scene is sent. |
| 0x01 | 1 byte | Brightness (0–255; optional; default 255) |

## Master (Pico W) usage

- For each configured LCD index `i`, the master knows `lcd_i2c_addresses[i]`.
- To set scene: write 1 byte to slave at `lcd_i2c_addresses[i]`, register 0: `[scene_id]` (0–254).
- To set brightness: write 1 byte to register 1: `[brightness]`.

## Slave (RP2350-Zero) requirements

- Expose I2C slave at the configured address.
- On write to register 0: set current scene; playback starts/continues at 24 fps from that moment and loops until register 0 is written again.
- On write to register 1: update brightness if supported.

## Scenes (bitmap only)

All animations are bitmap data from `bitmap_anim.bin` (generated by `village/tools/image_sequence_to_bitmap.py`). The tool reads numbered folders **0** through **254**; folder N becomes **scene N** (up to 255 scenes).

| Scene ID | Source | Notes |
|----------|--------|--------|
| 0–254 | `bitmap_anim.bin` scene 0–254 | 1–120 frames per scene (or 0 = black), 24 fps, loop until scene change |
| Other | — | Display black |
